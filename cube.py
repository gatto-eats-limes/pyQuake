# cube.py
import moderngl
import numpy as np

class Cube:
    def __init__(self, ctx, prog):
        self.ctx = ctx
        self.prog = prog

        # Vertex data for a cube (6 faces, 2 triangles per face, 3 vertices per triangle)
        # Each vertex has a position (3) and normal (3)
        vertices = np.array([
            # Positions          # Normals
            -0.5, -0.5, -0.5,    0.0, 0.0, -1.0,  # Back face
             0.5, -0.5, -0.5,    0.0, 0.0, -1.0,
             0.5,  0.5, -0.5,    0.0, 0.0, -1.0,
             0.5,  0.5, -0.5,    0.0, 0.0, -1.0,
            -0.5,  0.5, -0.5,    0.0, 0.0, -1.0,
            -0.5, -0.5, -0.5,    0.0, 0.0, -1.0,

            # Front face
            -0.5, -0.5,  0.5,    0.0, 0.0,  1.0,
             0.5, -0.5,  0.5,    0.0, 0.0,  1.0,
             0.5,  0.5,  0.5,    0.0, 0.0,  1.0,
             0.5,  0.5,  0.5,    0.0, 0.0,  1.0,
            -0.5,  0.5,  0.5,    0.0, 0.0,  1.0,
            -0.5, -0.5,  0.5,    0.0, 0.0,  1.0,

            # Left face
            -0.5, -0.5,  0.5,    -1.0, 0.0, 0.0,
            -0.5, -0.5, -0.5,    -1.0, 0.0, 0.0,
            -0.5,  0.5, -0.5,    -1.0, 0.0, 0.0,
            -0.5,  0.5, -0.5,    -1.0, 0.0, 0.0,
            -0.5,  0.5,  0.5,    -1.0, 0.0, 0.0,
            -0.5, -0.5,  0.5,    -1.0, 0.0, 0.0,

            # Right face
             0.5, -0.5,  0.5,    1.0, 0.0, 0.0,
             0.5, -0.5, -0.5,    1.0, 0.0, 0.0,
             0.5,  0.5, -0.5,    1.0, 0.0, 0.0,
             0.5,  0.5, -0.5,    1.0, 0.0, 0.0,
             0.5,  0.5,  0.5,    1.0, 0.0, 0.0,
             0.5, -0.5,  0.5,    1.0, 0.0, 0.0,

            # Top face
            -0.5,  0.5, -0.5,    0.0, 1.0, 0.0,
             0.5,  0.5, -0.5,    0.0, 1.0, 0.0,
             0.5,  0.5,  0.5,    0.0, 1.0, 0.0,
             0.5,  0.5,  0.5,    0.0, 1.0, 0.0,
            -0.5,  0.5,  0.5,    0.0, 1.0, 0.0,
            -0.5,  0.5, -0.5,    0.0, 1.0, 0.0,

            # Bottom face
            -0.5, -0.5, -0.5,    0.0, -1.0, 0.0,
             0.5, -0.5, -0.5,    0.0, -1.0, 0.0,
             0.5, -0.5,  0.5,    0.0, -1.0, 0.0,
             0.5, -0.5,  0.5,    0.0, -1.0, 0.0,
            -0.5, -0.5,  0.5,    0.0, -1.0, 0.0,
            -0.5, -0.5, -0.5,    0.0, -1.0, 0.0,
        ], dtype='f4')

        # Create vertex buffer
        self.vbo = self.ctx.buffer(vertices)

        # Create a vertex array object (VAO)
        self.vao = self.ctx.simple_vertex_array(prog, self.vbo, 'in_vert', 'in_normal')

    def render(self):
        self.vao.render(moderngl.TRIANGLES)
